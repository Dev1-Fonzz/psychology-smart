<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ujian Personaliti Premium + PDF</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
body { font-family: Arial, sans-serif; background: #e0f7fa; padding: 20px; }
h1 { text-align: center; color: #006064; }
.question { margin-bottom: 15px; background: #ffffff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
button { padding: 10px 20px; margin-top: 20px; cursor: pointer; display: block; margin-left:auto; margin-right:auto; background:#006064; color:#fff; border:none; border-radius:5px; font-weight:bold; }
button:hover { background:#004d4d; }
.result { margin-top: 30px; background: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: all 0.5s ease; }
.tooltip { position: relative; display: inline-block; border-bottom: 1px dotted black; }
.tooltip .tooltiptext { visibility: hidden; width: 220px; background-color: #555; color: #fff; text-align: left; border-radius: 6px; padding: 5px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -110px; opacity: 0; transition: opacity 0.3s; }
.tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
</style>
</head>
<body>

<h1>Ujian Personaliti Premium + PDF</h1>
<form id="quizForm">
<script>
// 60 soalan, 6 kategori x 10 soalan
const categories = {
  social: [
    "Saya suka berbual dengan ramai orang baru.","Saya selesa hanya dengan 1-2 kawan rapat.","Saya lebih suka aktiviti berkumpulan daripada solo.",
    "Saya cepat mesra dengan orang baru.","Saya lebih banyak mendengar daripada bercakap.","Saya selesa menghadiri majlis besar.",
    "Saya gemar menjadi pusat perhatian.","Saya cepat rasa letih bila lama bersama orang ramai.","Saya suka berbual santai dengan kawan lama.","Saya aktif mencari rakan baru."
  ],
  motivation: [
    "Saya mudah bersemangat bila ada ganjaran.","Saya suka cabaran baru walaupun risiko tinggi.","Saya mudah putus asa bila gagal pertama kali.",
    "Saya lebih suka kerja berstruktur daripada bebas.","Saya gemar belajar benda baru.","Saya sentiasa fokus untuk capai matlamat.",
    "Saya mudah terdorong oleh kritikan.","Saya gemar target jelas dalam hidup.","Saya kurang motivasi bila tiada dorongan luar.","Saya suka perancangan jangka panjang."
  ],
  creativity: [
    "Saya suka cuba cara baru walaupun berisiko.","Saya gemar berfikir idea pelik atau unik.","Saya lebih selesa ikut arahan daripada eksperimen sendiri.",
    "Saya suka menghasilkan sesuatu dari kosong.","Saya kreatif bila diberi masalah kompleks.","Saya suka mengubah cara orang lain lakukan sesuatu.",
    "Saya selesa dengan pemikiran abstrak.","Saya suka mencipta benda baru.","Saya cepat rasa bosan dengan rutin.","Saya suka menyelesaikan masalah dengan cara unik."
  ],
  emotion: [
    "Saya biasanya tenang dalam situasi tegang.","Saya mudah stress bila terlalu banyak kerja.","Saya cepat marah bila terganggu rutin.",
    "Saya mampu kawal emosi sendiri.","Saya mudah simpati pada orang lain.","Saya cepat sedih bila gagal.",
    "Saya selesa meluahkan perasaan.","Saya cepat gembira bila ada pencapaian.","Saya cenderung simpan masalah sendiri.","Saya cepat rasa kecewa bila harapan tak tercapai."
  ],
  work: [
    "Saya buat plan sebelum mula kerja.","Saya sering menunda kerja sampai last minute.","Saya boleh fokus lama walaupun gangguan ada.",
    "Saya gemar kerja berpasukan.","Saya selesa kerja sendiri tanpa bantuan.","Saya cepat rasa stress bila deadline dekat.",
    "Saya disiplin dengan masa.","Saya mudah sesuaikan diri dengan kerja baru.","Saya suka kerja yang terperinci.","Saya cepat selesaikan tugas sebelum waktu."
  ],
  interest: [
    "Saya lebih suka aktiviti luar daripada duduk rumah.","Saya suka membaca atau belajar benda baru sendiri.","Saya gemar aktiviti berkumpulan yang mencabar fizikal atau mental.",
    "Saya minat seni atau kreativiti.","Saya suka teknologi baru.","Saya gemar mempelajari budaya lain.",
    "Saya suka aktiviti santai di rumah.","Saya gemar sukan.","Saya cepat bosan dengan aktiviti berulang.","Saya gemar cabaran intelektual."
  ]
};

let count = 1;
for (let cat in categories) {
  categories[cat].forEach(q => {
    document.write(`
      <div class="question">
        <label>${count}. ${q}</label><br>
        <select name="q${count}">
          <option value="1">Sangat Tak Setuju</option>
          <option value="2">Tak Setuju</option>
          <option value="3">Neutral</option>
          <option value="4">Setuju</option>
          <option value="5">Sangat Setuju</option>
        </select>
      </div>
    `);
    count++;
  });
}
</script>

<button type="button" onclick="calculateResult()">Hantar Jawapan</button>
<button type="button" onclick="exportPDF()">Export PDF</button>
</form>

<div class="result" id="result"></div>
<canvas id="radarChart" style="max-width:600px; margin-top:30px;"></canvas>

<script>
let chartInstance;

function calculateResult() {
  const form = document.getElementById('quizForm');
  let scores = {social:0, motivation:0, creativity:0, emotion:0, work:0, interest:0};
  for(let i=1;i<=60;i++){
    let val = parseInt(form['q'+i].value);
    if(i<=10) scores.social += val;
    else if(i<=20) scores.motivation += val;
    else if(i<=30) scores.creativity += val;
    else if(i<=40) scores.emotion += val;
    else if(i<=50) scores.work += val;
    else scores.interest += val;
  }

  let socialScore = scores.social;
  let socialType = socialScore <=25 ? 'Introvert' : socialScore <=35 ? 'Ambivert' : 'Extrovert';

  let strengths = [];
  let weaknesses = [];
  if(scores.creativity > 30) strengths.push("Kreatif");
  if(scores.emotion > 30) strengths.push("Penyabar & Tenang");
  if(scores.work > 30) strengths.push("Tugas Fokus");
  if(scores.motivation < 25) weaknesses.push("Kurang motivasi");
  if(scores.social < 25) weaknesses.push("Kurang proaktif sosial");
  if(scores.emotion < 25) weaknesses.push("Mudah stress");

  let summary = `<h2>Keputusan Anda</h2>
  <p>Gaya Sosial: <strong>${socialType}</strong></p>
  <p>Kekuatan: <strong>${strengths.join(', ') || 'Tiada kekuatan menonjol'}</strong></p>
  <p>Perlu diperbaiki: <strong>${weaknesses.join(', ') || 'Tiada kelemahan ketara'}</strong></p>
  <p class="tooltip">Tips: <span class="tooltiptext">Fokus pada kategori rendah untuk tingkatkan diri</span>Hover untuk tips</p>`;

  document.getElementById('result').innerHTML = summary;

  const ctx = document.getElementById('radarChart').getContext('2d');
  if(chartInstance) chartInstance.destroy(); // reset chart
  chartInstance = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['Sosial','Motivasi','Kreativiti','Emosi','Kerja','Minat'],
      datasets: [{
        label: 'Skor Personaliti',
        data: [scores.social,scores.motivation,scores.creativity,scores.emotion,scores.work,scores.interest],
        backgroundColor: 'rgba(255,99,132,0.2)',
        borderColor: 'rgba(255,99,132,1)',
        pointBackgroundColor: 'rgba(255,99,132,1)',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: 'top' } },
      scales: { r: { suggestedMin:0, suggestedMax:50, ticks:{ stepSize:5 } } }
    }
  });
}

// Export PDF function
function exportPDF() {
  html2canvas(document.body).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('p','mm','a4');
    const imgProps = pdf.getImageProperties(imgData);
    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
    pdf.save('Keputusan_Personaliti.pdf');
  });
}
</script>

</body>
</html>
